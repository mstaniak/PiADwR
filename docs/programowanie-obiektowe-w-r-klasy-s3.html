<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 Programowanie obiektowe w R: klasy S3 | Notatki z laboratoriów ,,Programowanie i analiza danych w R’’</title>
  <meta name="description" content="Notatki z laboratoriów Programowanie i analiza danych w R." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 Programowanie obiektowe w R: klasy S3 | Notatki z laboratoriów ,,Programowanie i analiza danych w R’’" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Notatki z laboratoriów Programowanie i analiza danych w R." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 Programowanie obiektowe w R: klasy S3 | Notatki z laboratoriów ,,Programowanie i analiza danych w R’’" />
  
  <meta name="twitter:description" content="Notatki z laboratoriów Programowanie i analiza danych w R." />
  

<meta name="author" content="Mateusz Staniak" />


<meta name="date" content="2023-10-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="podstawy-kontroli-wersji-przy-pomocy-gita.html"/>
<link rel="next" href="moduły-w-aplikacjach-shiny.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"> </a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Wstęp</a></li>
<li class="chapter" data-level="2" data-path="podstawy-języka-r.html"><a href="podstawy-języka-r.html"><i class="fa fa-check"></i><b>2</b> Podstawy języka R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="podstawy-języka-r.html"><a href="podstawy-języka-r.html#liczby"><i class="fa fa-check"></i><b>2.1</b> Liczby</a></li>
<li class="chapter" data-level="2.2" data-path="podstawy-języka-r.html"><a href="podstawy-języka-r.html#łańcuchy-znaków"><i class="fa fa-check"></i><b>2.2</b> Łańcuchy znaków</a></li>
<li class="chapter" data-level="2.3" data-path="podstawy-języka-r.html"><a href="podstawy-języka-r.html#wartości-logiczne"><i class="fa fa-check"></i><b>2.3</b> Wartości logiczne</a></li>
<li class="chapter" data-level="2.4" data-path="podstawy-języka-r.html"><a href="podstawy-języka-r.html#wektory"><i class="fa fa-check"></i><b>2.4</b> Wektory</a></li>
<li class="chapter" data-level="2.5" data-path="podstawy-języka-r.html"><a href="podstawy-języka-r.html#indeksowanie"><i class="fa fa-check"></i><b>2.5</b> Indeksowanie</a></li>
<li class="chapter" data-level="2.6" data-path="podstawy-języka-r.html"><a href="podstawy-języka-r.html#operacje-na-wektorach"><i class="fa fa-check"></i><b>2.6</b> Operacje na wektorach</a></li>
<li class="chapter" data-level="2.7" data-path="podstawy-języka-r.html"><a href="podstawy-języka-r.html#r---funkcje"><i class="fa fa-check"></i><b>2.7</b> R - funkcje</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html"><i class="fa fa-check"></i><b>3</b> Wczytywanie danych w R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#formaty-danych"><i class="fa fa-check"></i><b>3.1</b> Formaty danych</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#csvdsv"><i class="fa fa-check"></i><b>3.1.1</b> CSV/DSV</a></li>
<li class="chapter" data-level="3.1.2" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#xml"><i class="fa fa-check"></i><b>3.1.2</b> XML</a></li>
<li class="chapter" data-level="3.1.3" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#json"><i class="fa fa-check"></i><b>3.1.3</b> JSON</a></li>
<li class="chapter" data-level="3.1.4" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#excel-xlsx"><i class="fa fa-check"></i><b>3.1.4</b> Excel (XLSX)</a></li>
<li class="chapter" data-level="3.1.5" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#otwarte-wersje-programu-excel"><i class="fa fa-check"></i><b>3.1.5</b> Otwarte wersje programu Excel</a></li>
<li class="chapter" data-level="3.1.6" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#pliki-tekstowe"><i class="fa fa-check"></i><b>3.1.6</b> Pliki tekstowe</a></li>
<li class="chapter" data-level="3.1.7" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#arkusze-kalkulacyjne-i-pliki-json"><i class="fa fa-check"></i><b>3.1.7</b> Arkusze kalkulacyjne i pliki JSON</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#locale"><i class="fa fa-check"></i><b>3.2</b> Locale</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#ustawienie-locale-przez-użytkownika"><i class="fa fa-check"></i><b>3.2.1</b> Ustawienie locale przez użytkownika</a></li>
<li class="chapter" data-level="3.2.2" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#ustawienie-locale-poprzez-readr"><i class="fa fa-check"></i><b>3.2.2</b> Ustawienie locale poprzez readr</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#natywne-formaty-r"><i class="fa fa-check"></i><b>3.3</b> Natywne formaty R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#rds"><i class="fa fa-check"></i><b>3.3.1</b> RDS</a></li>
<li class="chapter" data-level="3.3.2" data-path="wczytywanie-danych-w-r.html"><a href="wczytywanie-danych-w-r.html#rda"><i class="fa fa-check"></i><b>3.3.2</b> RDA</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="eksploracyjna-analiza-danych.html"><a href="eksploracyjna-analiza-danych.html"><i class="fa fa-check"></i><b>4</b> Eksploracyjna analiza danych</a>
<ul>
<li class="chapter" data-level="4.1" data-path="eksploracyjna-analiza-danych.html"><a href="eksploracyjna-analiza-danych.html#dane-tabelaryczne"><i class="fa fa-check"></i><b>4.1</b> Dane tabelaryczne</a></li>
<li class="chapter" data-level="4.2" data-path="eksploracyjna-analiza-danych.html"><a href="eksploracyjna-analiza-danych.html#typy-zmiennych"><i class="fa fa-check"></i><b>4.2</b> Typy zmiennych</a></li>
<li class="chapter" data-level="4.3" data-path="eksploracyjna-analiza-danych.html"><a href="eksploracyjna-analiza-danych.html#miary"><i class="fa fa-check"></i><b>4.3</b> Miary</a></li>
<li class="chapter" data-level="4.4" data-path="eksploracyjna-analiza-danych.html"><a href="eksploracyjna-analiza-danych.html#r---podsumowanie-kolumn"><i class="fa fa-check"></i><b>4.4</b> R - podsumowanie kolumn</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="przetwarzanie-danych-tabelarycznych.html"><a href="przetwarzanie-danych-tabelarycznych.html"><i class="fa fa-check"></i><b>5</b> Przetwarzanie danych tabelarycznych</a>
<ul>
<li class="chapter" data-level="5.1" data-path="przetwarzanie-danych-tabelarycznych.html"><a href="przetwarzanie-danych-tabelarycznych.html#wybieranie-kolumn"><i class="fa fa-check"></i><b>5.1</b> Wybieranie kolumn</a></li>
<li class="chapter" data-level="5.2" data-path="przetwarzanie-danych-tabelarycznych.html"><a href="przetwarzanie-danych-tabelarycznych.html#zmiana-nazw-kolumn"><i class="fa fa-check"></i><b>5.2</b> Zmiana nazw kolumn</a></li>
<li class="chapter" data-level="5.3" data-path="przetwarzanie-danych-tabelarycznych.html"><a href="przetwarzanie-danych-tabelarycznych.html#filtrowanie"><i class="fa fa-check"></i><b>5.3</b> Filtrowanie</a></li>
<li class="chapter" data-level="5.4" data-path="przetwarzanie-danych-tabelarycznych.html"><a href="przetwarzanie-danych-tabelarycznych.html#usuwanie-kolumn"><i class="fa fa-check"></i><b>5.4</b> Usuwanie kolumn</a></li>
<li class="chapter" data-level="5.5" data-path="przetwarzanie-danych-tabelarycznych.html"><a href="przetwarzanie-danych-tabelarycznych.html#manipulacje-na-kolumnach"><i class="fa fa-check"></i><b>5.5</b> Manipulacje na kolumnach</a></li>
<li class="chapter" data-level="5.6" data-path="przetwarzanie-danych-tabelarycznych.html"><a href="przetwarzanie-danych-tabelarycznych.html#aplikowanie-transformacji-do-każdej-kolumny"><i class="fa fa-check"></i><b>5.6</b> Aplikowanie transformacji do każdej kolumny</a></li>
<li class="chapter" data-level="5.7" data-path="przetwarzanie-danych-tabelarycznych.html"><a href="przetwarzanie-danych-tabelarycznych.html#grupowanie-i-podsumowanie"><i class="fa fa-check"></i><b>5.7</b> Grupowanie i podsumowanie</a></li>
<li class="chapter" data-level="5.8" data-path="przetwarzanie-danych-tabelarycznych.html"><a href="przetwarzanie-danych-tabelarycznych.html#podsumowywanie-wszystkich-kolumn"><i class="fa fa-check"></i><b>5.8</b> Podsumowywanie wszystkich kolumn</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="czyste-dane.html"><a href="czyste-dane.html"><i class="fa fa-check"></i><b>6</b> Czyste dane</a>
<ul>
<li class="chapter" data-level="6.1" data-path="czyste-dane.html"><a href="czyste-dane.html#dane-w-formacie-wąskim-i-szerokim"><i class="fa fa-check"></i><b>6.1</b> Dane w formacie wąskim i szerokim</a></li>
<li class="chapter" data-level="6.2" data-path="czyste-dane.html"><a href="czyste-dane.html#rozdzielanie-na-kolumny-wąska---szeroka"><i class="fa fa-check"></i><b>6.2</b> Rozdzielanie na kolumny (wąska -&gt; szeroka)</a></li>
<li class="chapter" data-level="6.3" data-path="czyste-dane.html"><a href="czyste-dane.html#scalanie-kilku-kolumn-w-jedną-szeroka---wąska"><i class="fa fa-check"></i><b>6.3</b> Scalanie kilku kolumn w jedną (szeroka -&gt; wąska)</a></li>
<li class="chapter" data-level="6.4" data-path="czyste-dane.html"><a href="czyste-dane.html#łączenie-tabel-danych"><i class="fa fa-check"></i><b>6.4</b> Łączenie tabel danych</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="czyste-dane.html"><a href="czyste-dane.html#merge"><i class="fa fa-check"></i><b>6.4.1</b> merge()</a></li>
<li class="chapter" data-level="6.4.2" data-path="czyste-dane.html"><a href="czyste-dane.html#join"><i class="fa fa-check"></i><b>6.4.2</b> join()</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="czyste-dane.html"><a href="czyste-dane.html#operacje-na-napisach-i-datach"><i class="fa fa-check"></i><b>6.5</b> Operacje na napisach i datach</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="czyste-dane.html"><a href="czyste-dane.html#operacje-na-napisach"><i class="fa fa-check"></i><b>6.5.1</b> Operacje na napisach</a></li>
<li class="chapter" data-level="6.5.2" data-path="czyste-dane.html"><a href="czyste-dane.html#operacje-na-datach"><i class="fa fa-check"></i><b>6.5.2</b> Operacje na datach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><i class="fa fa-check"></i><b>7</b> Katarzyna Frankiewicz, Maciej Grabias, Jakub Michałowski</a>
<ul>
<li class="chapter" data-level="7.1" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#wprowadzenie"><i class="fa fa-check"></i><b>7.1</b> Wprowadzenie</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#gramatyka-grafiki"><i class="fa fa-check"></i><b>7.1.1</b> Gramatyka grafiki</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#podstawy-tworzenia-wykresów-w-ggplot2"><i class="fa fa-check"></i><b>7.2</b> Podstawy tworzenia wykresów w ggplot2</a></li>
<li class="chapter" data-level="7.3" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#mapowanie"><i class="fa fa-check"></i><b>7.3</b> Mapowanie</a></li>
<li class="chapter" data-level="7.4" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#geometria-wykresu"><i class="fa fa-check"></i><b>7.4</b> Geometria wykresu</a></li>
<li class="chapter" data-level="7.5" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#funkcje-pomagające-poprawić-czytelność-wykresu"><i class="fa fa-check"></i><b>7.5</b> Funkcje pomagające poprawić czytelność wykresu</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#systemy-współrzędnych"><i class="fa fa-check"></i><b>7.5.1</b> Systemy współrzędnych</a></li>
<li class="chapter" data-level="7.5.2" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#dopasowanie-położenia"><i class="fa fa-check"></i><b>7.5.2</b> Dopasowanie położenia</a></li>
<li class="chapter" data-level="7.5.3" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#zarządzanie-osiami-współrzędnych"><i class="fa fa-check"></i><b>7.5.3</b> Zarządzanie osiami współrzędnych</a></li>
<li class="chapter" data-level="7.5.4" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#motywy"><i class="fa fa-check"></i><b>7.5.4</b> Motywy</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html"><a href="katarzyna-frankiewicz-maciej-grabias-jakub-michałowski.html#panele"><i class="fa fa-check"></i><b>7.6</b> Panele</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="czysty-i-wydajny-kod-w-r.html"><a href="czysty-i-wydajny-kod-w-r.html"><i class="fa fa-check"></i><b>8</b> Czysty i wydajny kod w R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="czysty-i-wydajny-kod-w-r.html"><a href="czysty-i-wydajny-kod-w-r.html#czysty-kod"><i class="fa fa-check"></i><b>8.1</b> Czysty kod</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="czysty-i-wydajny-kod-w-r.html"><a href="czysty-i-wydajny-kod-w-r.html#co-jeśli-w-kodzie-jest-bałagan"><i class="fa fa-check"></i><b>8.1.1</b> Co jeśli w kodzie jest ,,bałagan’’?</a></li>
<li class="chapter" data-level="8.1.2" data-path="czysty-i-wydajny-kod-w-r.html"><a href="czysty-i-wydajny-kod-w-r.html#opis-zmiennych"><i class="fa fa-check"></i><b>8.1.2</b> Opis zmiennych</a></li>
<li class="chapter" data-level="8.1.3" data-path="czysty-i-wydajny-kod-w-r.html"><a href="czysty-i-wydajny-kod-w-r.html#opis-intencji"><i class="fa fa-check"></i><b>8.1.3</b> Opis intencji</a></li>
<li class="chapter" data-level="8.1.4" data-path="czysty-i-wydajny-kod-w-r.html"><a href="czysty-i-wydajny-kod-w-r.html#unikanie-błędnych-informacji"><i class="fa fa-check"></i><b>8.1.4</b> Unikanie błędnych informacji</a></li>
<li class="chapter" data-level="8.1.5" data-path="czysty-i-wydajny-kod-w-r.html"><a href="czysty-i-wydajny-kod-w-r.html#funkcje"><i class="fa fa-check"></i><b>8.1.5</b> Funkcje</a></li>
<li class="chapter" data-level="8.1.6" data-path="czysty-i-wydajny-kod-w-r.html"><a href="czysty-i-wydajny-kod-w-r.html#komentarze"><i class="fa fa-check"></i><b>8.1.6</b> Komentarze</a></li>
<li class="chapter" data-level="8.1.7" data-path="czysty-i-wydajny-kod-w-r.html"><a href="czysty-i-wydajny-kod-w-r.html#obiekt-a-struktura-danych"><i class="fa fa-check"></i><b>8.1.7</b> Obiekt a struktura danych</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="czysty-i-wydajny-kod-w-r.html"><a href="czysty-i-wydajny-kod-w-r.html#styl-kodu-i-narzędzia-pomagające-w-utrzymaniu-czystego-kodu"><i class="fa fa-check"></i><b>8.2</b> Styl kodu i narzędzia pomagające w utrzymaniu czystego kodu</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html"><i class="fa fa-check"></i><b>9</b> Interaktywna wizualizacja danych z pakietem shiny: interfejs użytkownika</a>
<ul>
<li class="chapter" data-level="9.1" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html#wstęp-1"><i class="fa fa-check"></i><b>9.1</b> Wstęp</a></li>
<li class="chapter" data-level="9.2" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html#tworzenie-ui"><i class="fa fa-check"></i><b>9.2</b> Tworzenie UI</a></li>
<li class="chapter" data-level="9.3" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html#układ-strony"><i class="fa fa-check"></i><b>9.3</b> Układ strony</a></li>
<li class="chapter" data-level="9.4" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html#elementy-wejścia-i-wyjścia"><i class="fa fa-check"></i><b>9.4</b> Elementy wejścia i wyjścia</a></li>
<li class="chapter" data-level="9.5" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html#przykład-użycia"><i class="fa fa-check"></i><b>9.5</b> Przykład użycia</a></li>
<li class="chapter" data-level="9.6" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html#wygląd-aplikacji"><i class="fa fa-check"></i><b>9.6</b> Wygląd aplikacji</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-interfejs-użytkownika.html#uwaga"><i class="fa fa-check"></i><b>9.6.1</b> Uwaga</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-strona-serwerowa.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-strona-serwerowa.html"><i class="fa fa-check"></i><b>10</b> Interaktywna wizualizacja danych z pakietem shiny: strona serwerowa</a>
<ul>
<li class="chapter" data-level="10.1" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-strona-serwerowa.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-strona-serwerowa.html#wstęp-2"><i class="fa fa-check"></i><b>10.1</b> Wstęp</a></li>
<li class="chapter" data-level="10.2" data-path="interaktywna-wizualizacja-danych-z-pakietem-shiny-strona-serwerowa.html"><a href="interaktywna-wizualizacja-danych-z-pakietem-shiny-strona-serwerowa.html#serwer-shiny"><i class="fa fa-check"></i><b>10.2</b> Serwer Shiny</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="podstawy-kontroli-wersji-przy-pomocy-gita.html"><a href="podstawy-kontroli-wersji-przy-pomocy-gita.html"><i class="fa fa-check"></i><b>11</b> Podstawy kontroli wersji przy pomocy Gita</a>
<ul>
<li class="chapter" data-level="11.1" data-path="podstawy-kontroli-wersji-przy-pomocy-gita.html"><a href="podstawy-kontroli-wersji-przy-pomocy-gita.html#podstawowe-informacje"><i class="fa fa-check"></i><b>11.1</b> Podstawowe informacje</a></li>
<li class="chapter" data-level="11.2" data-path="podstawy-kontroli-wersji-przy-pomocy-gita.html"><a href="podstawy-kontroli-wersji-przy-pomocy-gita.html#podstawowe-komendy"><i class="fa fa-check"></i><b>11.2</b> Podstawowe komendy</a></li>
<li class="chapter" data-level="11.3" data-path="podstawy-kontroli-wersji-przy-pomocy-gita.html"><a href="podstawy-kontroli-wersji-przy-pomocy-gita.html#repozytoria"><i class="fa fa-check"></i><b>11.3</b> Repozytoria</a></li>
<li class="chapter" data-level="11.4" data-path="podstawy-kontroli-wersji-przy-pomocy-gita.html"><a href="podstawy-kontroli-wersji-przy-pomocy-gita.html#podstawowe-komendy-1"><i class="fa fa-check"></i><b>11.4</b> Podstawowe komendy</a></li>
<li class="chapter" data-level="11.5" data-path="podstawy-kontroli-wersji-przy-pomocy-gita.html"><a href="podstawy-kontroli-wersji-przy-pomocy-gita.html#cofanie-zmian"><i class="fa fa-check"></i><b>11.5</b> Cofanie zmian</a></li>
<li class="chapter" data-level="11.6" data-path="podstawy-kontroli-wersji-przy-pomocy-gita.html"><a href="podstawy-kontroli-wersji-przy-pomocy-gita.html#gałęzie"><i class="fa fa-check"></i><b>11.6</b> Gałęzie</a></li>
<li class="chapter" data-level="11.7" data-path="podstawy-kontroli-wersji-przy-pomocy-gita.html"><a href="podstawy-kontroli-wersji-przy-pomocy-gita.html#tworzenie-własnych-repozytoriów"><i class="fa fa-check"></i><b>11.7</b> Tworzenie własnych repozytoriów</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="programowanie-obiektowe-w-r-klasy-s3.html"><a href="programowanie-obiektowe-w-r-klasy-s3.html"><i class="fa fa-check"></i><b>12</b> Programowanie obiektowe w R: klasy S3</a>
<ul>
<li class="chapter" data-level="12.1" data-path="programowanie-obiektowe-w-r-klasy-s3.html"><a href="programowanie-obiektowe-w-r-klasy-s3.html#systemy-programowania-obiektowego-w-r"><i class="fa fa-check"></i><b>12.1</b> Systemy programowania obiektowego w R</a></li>
<li class="chapter" data-level="12.2" data-path="programowanie-obiektowe-w-r-klasy-s3.html"><a href="programowanie-obiektowe-w-r-klasy-s3.html#s3"><i class="fa fa-check"></i><b>12.2</b> S3</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="programowanie-obiektowe-w-r-klasy-s3.html"><a href="programowanie-obiektowe-w-r-klasy-s3.html#klasy-i-atrybuty"><i class="fa fa-check"></i><b>12.2.1</b> Klasy i atrybuty</a></li>
<li class="chapter" data-level="12.2.2" data-path="programowanie-obiektowe-w-r-klasy-s3.html"><a href="programowanie-obiektowe-w-r-klasy-s3.html#funkcje-generyczne-i-metody"><i class="fa fa-check"></i><b>12.2.2</b> Funkcje generyczne i metody</a></li>
<li class="chapter" data-level="12.2.3" data-path="programowanie-obiektowe-w-r-klasy-s3.html"><a href="programowanie-obiektowe-w-r-klasy-s3.html#dziedziczenie"><i class="fa fa-check"></i><b>12.2.3</b> Dziedziczenie</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="programowanie-obiektowe-w-r-klasy-s3.html"><a href="programowanie-obiektowe-w-r-klasy-s3.html#s4"><i class="fa fa-check"></i><b>12.3</b> S4</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="programowanie-obiektowe-w-r-klasy-s3.html"><a href="programowanie-obiektowe-w-r-klasy-s3.html#bonus-przykład-wykorzystania-systemu-s4"><i class="fa fa-check"></i><b>12.3.1</b> Bonus: przykład wykorzystania systemu S4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="moduły-w-aplikacjach-shiny.html"><a href="moduły-w-aplikacjach-shiny.html"><i class="fa fa-check"></i><b>13</b> Moduły w aplikacjach shiny</a>
<ul>
<li class="chapter" data-level="13.1" data-path="moduły-w-aplikacjach-shiny.html"><a href="moduły-w-aplikacjach-shiny.html#czym-jest-moduł-shiny"><i class="fa fa-check"></i><b>13.1</b> Czym jest moduł Shiny</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="moduły-w-aplikacjach-shiny.html"><a href="moduły-w-aplikacjach-shiny.html#dlaczego-warto-używać-modułów-shiny"><i class="fa fa-check"></i><b>13.1.1</b> Dlaczego warto używać modułów Shiny?</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="moduły-w-aplikacjach-shiny.html"><a href="moduły-w-aplikacjach-shiny.html#budowa-modułu-shiny."><i class="fa fa-check"></i><b>13.2</b> Budowa modułu Shiny.</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="moduły-w-aplikacjach-shiny.html"><a href="moduły-w-aplikacjach-shiny.html#jak-używać-modułów-shiny"><i class="fa fa-check"></i><b>13.2.1</b> Jak używać modułów Shiny?</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Notatki z laboratoriów ,,Programowanie i analiza danych w R’’</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programowanie-obiektowe-w-r-klasy-s3" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Chapter 12</span> Programowanie obiektowe w R: klasy S3<a href="programowanie-obiektowe-w-r-klasy-s3.html#programowanie-obiektowe-w-r-klasy-s3" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Programując w R jesteśmy oswojeni z myśleniem kategoriami funkcji - przekształceń nakładanych na macierze lub ramki danych. Jest to naturalne ze względu na zastosowanie R głównie w statystyce i pochodnych jej dziedzin.</p>
<p>Tymczasem programowanie obiektowe, choć często niepotrzebne do przeprowadzenia analiz lub symulacji, może się okazać użyteczne przy tworzeniu większego projektu, w szczególności projektu współtworzonego przez więcej osób. Zdefiniowanie klas i metod nadaje projektowi strukturę, co sprawia, że jego rozbudowa przebiega mniej chaotycznie.</p>
<p>Ponadto, znajomość podstaw systemów programowania obiektowego w R umożliwia nam lepsze zrozumienie działania bazowych funkcji i obiektów R oraz ewentualne ich rozbudowywanie.</p>
<div id="systemy-programowania-obiektowego-w-r" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Systemy programowania obiektowego w R<a href="programowanie-obiektowe-w-r-klasy-s3.html#systemy-programowania-obiektowego-w-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>W przeciwieństwie do wielu popularnych języków programowania, R nie ma jednego ujednoliconego systemu programowania obiektowego - jest ich wiele, przy czym różnią się nie tylko składnią, ale też funkcjonalnościami.</p>
<p>Pierwsze wersje pierwowzoru języka R - języka S nie posiadały żadnego systemu obiektowego. Wraz z trzecią wersją S wprowadzono pierwszy z nich: <strong>S3</strong>. Następnie, kiedy ten okazał się niewystarczający dla potrzeb użytkowników - <strong>S4</strong>. Oba systemy finalnie znalazły się w <em>base</em> języka R. Z czasem, w miarę wzrastania potrzeb, powstawały kolejne alternatywne systemy klas, które funkcjonowały równolegle i równoprawnie.</p>
<p>Do dzisiaj nie wyróżniamy systemu “oficjalnego” czy preferowanego - każdy z kilku pozostałych w powszechnym użyciu ma swoje zastosowania, w których niekorzystnym lub niewygodnym jest zastąpienie go innym. W tej notatce przyjrzymy się przede wszystkim S3.</p>
</div>
<div id="s3" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> S3<a href="programowanie-obiektowe-w-r-klasy-s3.html#s3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>S3 to system, z którym stykamy się najczęśniej. Wszystkie wbudowane klasy obiektów zostały zbudowane właśnie przy pomocy systemu S3. By sprawdzić, do jakiej klasy S3 należy obiekt, używamy funkcji <em>class</em>.
W codziennej pracy w R operujemy w wiekszości na obiektach zbudowanych w S3. Klasy S3 to m.in. <em>factor</em>,<em>data.frame</em>,<em>matrix</em>.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb364-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;y&quot;</span>,<span class="st">&quot;n&quot;</span>,<span class="st">&quot;y&quot;</span>,<span class="st">&quot;n&quot;</span>,<span class="st">&quot;n&quot;</span>))</span>
<span id="cb364-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb364-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(f)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p>Warto w tym miejscu podkreślić, że <strong>klasa zmiennej nie jest równoważna typowi zmiennej</strong>, np. macierz liczb jest klasy matrix, ale typu double.</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb366-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>),<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb366-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb366-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(m)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<p>Każdemu obiektowi mogą być (ale nie muszą) przypisane <strong>atrybuty</strong>. Atrybuty mozna rozumieć jako cechy lub parametry obiektu. W przypadku macierzy są to jej wymiary.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(m)</span></code></pre></div>
<pre><code>## $dim
## [1] 2 2</code></pre>
<div id="klasy-i-atrybuty" class="section level3 hasAnchor" number="12.2.1">
<h3><span class="header-section-number">12.2.1</span> Klasy i atrybuty<a href="programowanie-obiektowe-w-r-klasy-s3.html#klasy-i-atrybuty" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>W systemie S3 nie tworzymy definicji klasy, nie określamy również, jakie atrybuty obiekt danej klasy ma. Obiektowi możemy nadać klasę przy jego utworzeniu, z użyciem funkcji <em>structure</em>:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb372-1" aria-hidden="true" tabindex="-1"></a>kanapka <span class="ot">&lt;-</span><span class="fu">structure</span>(<span class="fu">c</span>(<span class="st">&quot;szynka&quot;</span>, <span class="st">&quot;margaryna&quot;</span>, <span class="st">&quot;chleb&quot;</span>), <span class="at">class =</span> <span class="st">&quot;jedzenie&quot;</span>)</span>
<span id="cb372-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb372-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(kanapka)</span></code></pre></div>
<pre><code>## [1] &quot;jedzenie&quot;</code></pre>
<p>lub w dowolnym momencie po jego utworzeniu z użyciem <em>class</em>:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb374-1" aria-hidden="true" tabindex="-1"></a>szarlotka <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;jaja&quot;</span>, <span class="st">&quot;mąka&quot;</span>, <span class="st">&quot;masło&quot;</span>, <span class="st">&quot;cukier&quot;</span>)</span>
<span id="cb374-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb374-2" aria-hidden="true" tabindex="-1"></a>szarlotka <span class="ot">&lt;-</span> <span class="fu">c</span>(szarlotka, <span class="st">&quot;jabłka&quot;</span>)</span>
<span id="cb374-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb374-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(szarlotka) <span class="ot">&lt;-</span> <span class="st">&quot;jedzenie&quot;</span></span>
<span id="cb374-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb374-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(szarlotka)</span></code></pre></div>
<pre><code>## [1] &quot;jedzenie&quot;</code></pre>
<p>Każdemu obiektowi możemy również indywidualnie przypisać atrybuty, również na kilka sposobów, przy jego utworzeniu z użyciem <em>structure</em>:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb376-1" aria-hidden="true" tabindex="-1"></a>hot_dog <span class="ot">&lt;-</span> <span class="fu">structure</span>(<span class="fu">c</span>(<span class="st">&quot;parówka&quot;</span>, <span class="st">&quot;bułka&quot;</span>, <span class="st">&quot;ketchup&quot;</span>), <span class="at">class=</span><span class="st">&quot;jedzenie&quot;</span>, <span class="at">kalorie =</span> <span class="dv">300</span>)</span>
<span id="cb376-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb376-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(hot_dog)</span></code></pre></div>
<pre><code>## $class
## [1] &quot;jedzenie&quot;
## 
## $kalorie
## [1] 300</code></pre>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(hot_dog)</span></code></pre></div>
<pre><code>## [1] &quot;jedzenie&quot;</code></pre>
<p>Lub w dowolnym momencie z użyciem funkcji <em>attr</em>:</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(kanapka, <span class="st">&quot;kalorie&quot;</span>)<span class="ot">=</span><span class="dv">150</span></span>
<span id="cb380-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb380-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(szarlotka, <span class="st">&quot;kalorie&quot;</span>)<span class="ot">=</span><span class="dv">265</span></span>
<span id="cb380-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb380-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(kanapka)</span></code></pre></div>
<pre><code>## $class
## [1] &quot;jedzenie&quot;
## 
## $kalorie
## [1] 150</code></pre>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(szarlotka)</span></code></pre></div>
<pre><code>## $class
## [1] &quot;jedzenie&quot;
## 
## $kalorie
## [1] 265</code></pre>
<p>Z użyciem funkcji <em>attributes</em> i <em>attr</em> można również “dostać się” do wartości atrybutów obiektu:</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(szarlotka, <span class="st">&quot;kalorie&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 265</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(szarlotka)<span class="sc">$</span>kalorie</span></code></pre></div>
<pre><code>## [1] 265</code></pre>
<p>Tworzenie obiektów różnych klas S3 jest więc bardzo proste i nie wymaga (przynajmniej formalnie) predefiniowania klasy i atrybutów. System jest więc z jednej strony bardzo elastyczny, z drugiej - nieprecyzyjny. Niesie to za sobą pewne konsekwencje, np. formalnie nic nie stoi na przeszkodzie by zrobić coś takiego:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb388-1" aria-hidden="true" tabindex="-1"></a>droga <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;asfalt&quot;</span>,<span class="st">&quot;pobocze&quot;</span>, <span class="st">&quot;lewy pas&quot;</span>, <span class="st">&quot;prawy pas&quot;</span>)</span>
<span id="cb388-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb388-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(droga) <span class="ot">&lt;-</span> <span class="st">&quot;jedzenie&quot;</span></span>
<span id="cb388-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb388-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(droga)</span></code></pre></div>
<pre><code>## [1] &quot;jedzenie&quot;</code></pre>
<p>lub takiego…</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb390-1" aria-hidden="true" tabindex="-1"></a>średnia_bez_na <span class="ot">&lt;-</span> <span class="cf">function</span>(...) <span class="fu">mean</span>(<span class="at">na.rm=</span><span class="cn">TRUE</span>,...)</span>
<span id="cb390-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb390-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(średnia_bez_na)<span class="ot">&lt;-</span><span class="st">&quot;jedzenie&quot;</span></span>
<span id="cb390-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb390-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(średnia_bez_na)</span></code></pre></div>
<pre><code>## [1] &quot;jedzenie&quot;</code></pre>
<p>lub takiego:</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(hot_dog, <span class="st">&quot;kalorie&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;przecież to prawie nie ma kalorii!&quot;</span></span>
<span id="cb392-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb392-2" aria-hidden="true" tabindex="-1"></a>bilans_posilkow <span class="ot">&lt;-</span> <span class="fu">attr</span>(hot_dog,<span class="st">&quot;kalorie&quot;</span>)<span class="sc">+</span><span class="fu">attr</span>(szarlotka, <span class="st">&quot;kalorie&quot;</span>)<span class="sc">+</span><span class="fu">attr</span>(kanapka, <span class="st">&quot;kalorie&quot;</span>)</span></code></pre></div>
<pre><code>## Error in attr(hot_dog, &quot;kalorie&quot;) + attr(szarlotka, &quot;kalorie&quot;): argument nieliczbowy przekazany do operatora dwuargumentowego</code></pre>
<p>Dlatego należy pamiętać, by klas i atrybutów nie przydzielać chaotycznie, zachować pewne reguły, mimo że formalnie nie są wymagane przy użyciu <em>S3</em>.</p>
</div>
<div id="funkcje-generyczne-i-metody" class="section level3 hasAnchor" number="12.2.2">
<h3><span class="header-section-number">12.2.2</span> Funkcje generyczne i metody<a href="programowanie-obiektowe-w-r-klasy-s3.html#funkcje-generyczne-i-metody" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><em>Metody</em> to funkcje działające na obiektach danej klasy. Z reguły są predefiniowane przy utworzeniu klasy wraz z polami. Inaczej jednak jest z systemem S3 w R. Nie definiujemy klasy - klasa jest tworzona przy pierwszym przypisaniu jej jakiemuś obiektowi. Metody tworzy się przy pomocy <em>funkcji generycznych</em> (<em>generics</em>).</p>
<div id="funkcje-generyczne" class="section level4 hasAnchor" number="12.2.2.1">
<h4><span class="header-section-number">12.2.2.1</span> Funkcje generyczne<a href="programowanie-obiektowe-w-r-klasy-s3.html#funkcje-generyczne" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>By lepiej zrozumieć logikę stojącą za funkcjami generycznymi, spróbujmy spojrzeć na klasy i ich metody z nieco mniej standardowej perspektywy. Dla różnych klas możemy mieć analogiczne metody, zachowujące się nieco inaczej w zależności od specyfiki klasy, np. inaczej rozumiemy różnicę między dwoma datami a różnicę między dwoma liczbami - liczby odejmujemy od siebie bezpośrednio, podczas gdy w przypadku dat oczekujemy różnicy w dniach pomiędzy nimi - w tym celu nie wystarczy bezpośrednie odjęcie od siebie dwóch dat.</p>
<p>W systemie S3 metody nie są przypisane bezpośrednio klasie, są przypisane odpowiedniej <strong>funkcji generycznej</strong>. Funkcja generyczna określa nazwę metody wspólną dla wszystkich klas i umożliwia tworzenie wariantów metody dla różnych klas pod tą konkretną nazwą. Zanim przejdziemy do tworzenia funkcji generycznych oraz metod dla własnych klas przyjrzyjmy się działaniu już istniejących.</p>
<p>Jedną z funkcji generycznych jest funkcja <em>summary</em> - funkcja podsumowująca obiekt (np. <em>summary(lm(X~Y))</em>).</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb394-1" aria-hidden="true" tabindex="-1"></a>summary</span></code></pre></div>
<pre><code>## function (object, ...) 
## UseMethod(&quot;summary&quot;)
## &lt;bytecode: 0x55bf1e71aba0&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<p>Użyjemy funkcji <em>methods</em>, by wylistować wszystkie dostępne metody dla danej funkcji generycznej.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(summary)</span></code></pre></div>
<pre><code>##   [1] summary,ANY-method                  summary,DBIObject-method           
##   [3] summary,diagonalMatrix-method       summary,marrayInfo-method          
##   [5] summary,marrayLayout-method         summary,marrayNorm-method          
##   [7] summary,marrayRaw-method            summary,mle-method                 
##   [9] summary,sparseMatrix-method         summary.aareg*                     
##  [11] summary.allFit*                     summary.aov                        
##  [13] summary.aovlist*                    summary.aspell*                    
##  [15] summary.cch*                        summary.check_packages_in_dir*     
##  [17] summary.connection                  summary.corAR1*                    
##  [19] summary.corARMA*                    summary.corCAR1*                   
##  [21] summary.corCompSymm*                summary.corExp*                    
##  [23] summary.corGaus*                    summary.corIdent*                  
##  [25] summary.corLin*                     summary.corNatural*                
##  [27] summary.corRatio*                   summary.corSpher*                  
##  [29] summary.corStruct*                  summary.corSymm*                   
##  [31] summary.coxph*                      summary.coxph.penal*               
##  [33] summary.data.frame                  summary.Date                       
##  [35] summary.default                     summary.Duration*                  
##  [37] summary.ecdf*                       summary.EList*                     
##  [39] summary.EListRaw*                   summary.factor                     
##  [41] summary.gam*                        summary.ggplot*                    
##  [43] summary.glm                         summary.gls*                       
##  [45] summary.haven_labelled*             summary.hcl_palettes*              
##  [47] summary.infl*                       summary.Interval*                  
##  [49] summary.lm                          summary.lme*                       
##  [51] summary.lmList*                     summary.lmList4*                   
##  [53] summary.loess*                      summary.loglm*                     
##  [55] summary.MAList*                     summary.manova                     
##  [57] summary.MArrayLM*                   summary.matrix                     
##  [59] summary.merMod*                     summary.mlm*                       
##  [61] summary.modelStruct*                summary.negbin*                    
##  [63] summary.nls*                        summary.nlsList*                   
##  [65] summary.packageStatus*              summary.pdBlocked*                 
##  [67] summary.pdCompSymm*                 summary.pdDiag*                    
##  [69] summary.pdIdent*                    summary.pdIdnot*                   
##  [71] summary.pdLogChol*                  summary.pdMat*                     
##  [73] summary.pdNatural*                  summary.pdSymm*                    
##  [75] summary.pdTens*                     summary.Period*                    
##  [77] summary.polr*                       summary.POSIXct                    
##  [79] summary.POSIXlt                     summary.ppr*                       
##  [81] summary.prcomp*                     summary.prcomplist*                
##  [83] summary.princomp*                   summary.proc_time                  
##  [85] summary.pyears*                     summary.ratetable*                 
##  [87] summary.reStruct*                   summary.RGList*                    
##  [89] summary.rlang_error*                summary.rlang_message*             
##  [91] summary.rlang_trace*                summary.rlang_warning*             
##  [93] summary.rlang:::list_of_conditions* summary.rlm*                       
##  [95] summary.RUnitTestData*              summary.shingle*                   
##  [97] summary.srcfile                     summary.srcref                     
##  [99] summary.stepfun                     summary.stl*                       
## [101] summary.summary.merMod*             summary.survexp*                   
## [103] summary.survfit*                    summary.survfitms*                 
## [105] summary.survreg*                    summary.table                      
## [107] summary.TestResults*                summary.tmerge*                    
## [109] summary.trellis*                    summary.tukeysmooth*               
## [111] summary.varComb*                    summary.varConstPower*             
## [113] summary.varConstProp*               summary.varExp*                    
## [115] summary.varFixed*                   summary.varFunc*                   
## [117] summary.varIdent*                   summary.varPower*                  
## [119] summary.vctrs_sclr*                 summary.vctrs_vctr*                
## [121] summary.warnings                    summary.XMLInternalDocument*       
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<p>Każda z wypisanych nazw odpowiada wariantowi metody dla jednej klasy. Zwrócmy uwagę na specyficzną składnię nazw tych funkcji - człon po kropce odpowiada nazwie klasy, jakiej metoda dotyczy. Przyjrzyjmy się wariantom <em>summary</em> dla dwóch różnych klas: <em>lm</em> i <em>matrix</em>.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb398-1" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">12</span>), <span class="dv">6</span>,<span class="dv">2</span>)</span>
<span id="cb398-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb398-2" aria-hidden="true" tabindex="-1"></a>Y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb398-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb398-3" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y<span class="sc">~</span>X)</span>
<span id="cb398-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb398-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb398-5"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb398-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary.lm</span>(model)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Y ~ X)
## 
## Residuals:
##       1       2       3       4       5       6 
## -0.1667 -0.1667  0.8333 -0.1667 -0.1667 -0.1667 
## 
## Coefficients: (2 not defined because of singularities)
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   2.1667     0.1667      13  4.8e-05 ***
## X1                NA         NA      NA       NA    
## X2                NA         NA      NA       NA    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4082 on 5 degrees of freedom</code></pre>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary.matrix</span>(X)</span></code></pre></div>
<pre><code>##        V1          V2   
##  Min.   :1   Min.   :1  
##  1st Qu.:1   1st Qu.:1  
##  Median :1   Median :1  
##  Mean   :1   Mean   :1  
##  3rd Qu.:1   3rd Qu.:1  
##  Max.   :1   Max.   :1</code></pre>
<p>Jednak, by użyć odpowiedniej funkcji dla obiektu, nie musimy specyfikować jego klasy - właśnie dzięki zdefiniowaniu funkcji generycznej. Bez względu na klasę obiektu uzywamy składni <em>funkcja_generyczna(obiekt)</em>. Wywoływana jest wówczas funkcja generyczna, która na podstawie klasy lub typu obiektu dopasowuje wariant metody. Spójrzmy jak to wygląda na przykładzie <em>summary</em>:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Y ~ X)
## 
## Residuals:
##       1       2       3       4       5       6 
## -0.1667 -0.1667  0.8333 -0.1667 -0.1667 -0.1667 
## 
## Coefficients: (2 not defined because of singularities)
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   2.1667     0.1667      13  4.8e-05 ***
## X1                NA         NA      NA       NA    
## X2                NA         NA      NA       NA    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4082 on 5 degrees of freedom</code></pre>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(X)</span></code></pre></div>
<pre><code>##        V1          V2   
##  Min.   :1   Min.   :1  
##  1st Qu.:1   1st Qu.:1  
##  Median :1   Median :1  
##  Mean   :1   Mean   :1  
##  3rd Qu.:1   3rd Qu.:1  
##  Max.   :1   Max.   :1</code></pre>
<p>Jak widać na przykładzie powyżej wywołanie funkcji generycznej na obiekcie spowodowało dopasowanie odpowiedniej dla klasy obiektu metody i dało identyczny efekt jak wywołanie bezpośrednio dedykowanej funkcji.</p>
</div>
<div id="tworzenie-funkcji-generycznych-i-metod" class="section level4 hasAnchor" number="12.2.2.2">
<h4><span class="header-section-number">12.2.2.2</span> Tworzenie funkcji generycznych i metod<a href="programowanie-obiektowe-w-r-klasy-s3.html#tworzenie-funkcji-generycznych-i-metod" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Nowe funkcje generyczne tworzy się według następującego schematu:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb406-1" aria-hidden="true" tabindex="-1"></a>nazwa_metody <span class="ot">&lt;-</span> <span class="cf">function</span> (x) {</span>
<span id="cb406-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb406-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">UseMethod</span>(<span class="st">&quot;nazwa_metody&quot;</span>, x)</span>
<span id="cb406-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb406-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Po utworzeniu funkcji generycznej możemy przystąpić do napisania metod dla konkretnych klas. Metody tworzymy jako funkcje nazwane według konwencji <em>nazwa_metody.klasa</em>.</p>
<p>Spróbujmy wg powyższego schematu utworzyć metodę dla utworzonej wcześniej klasy <em>jedzenie</em>. Niech nasza metoda nazywa się <em>zjedz</em>:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb407-1" aria-hidden="true" tabindex="-1"></a>zjedz <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb407-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb407-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">UseMethod</span>(<span class="st">&quot;zjedz&quot;</span>,x)</span>
<span id="cb407-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb407-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Mając gotową funkcję generyczną możemy przejść do określenia zachowania metody dla naszej klasy:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb408-1" aria-hidden="true" tabindex="-1"></a>zjedz.jedzenie <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb408-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb408-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Mniam mniam</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb408-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb408-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb408-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb408-4" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(szarlotka)</span></code></pre></div>
<pre><code>## Mniam mniam</code></pre>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(kanapka)</span></code></pre></div>
<pre><code>## Mniam mniam</code></pre>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(hot_dog)</span></code></pre></div>
<pre><code>## Mniam mniam</code></pre>
<p>Oraz, jeśli potrzebujemy, również dla innych istniejących klas, w tym również wbudowanych, np. <em>matrix</em>.</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb414-1" aria-hidden="true" tabindex="-1"></a>zjedz.matrix <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb414-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb414-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warning</span>(<span class="st">&quot;Przeciez to macierz! Tego sie nie je!</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb414-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb414-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb414-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb414-4" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>),<span class="dv">2</span>,<span class="dv">2</span>))</span></code></pre></div>
<pre><code>## Warning in zjedz.matrix(matrix(c(1, 2, 2, 3), 2, 2)): Przeciez to macierz! Tego sie nie je!</code></pre>
<p>W szczególności możemy określić zachowanie metody dla pseudoklasy <em>default</em>, czyli określić domyślne zachowanie metody. W kontekście naszego przykładu z klasą <em>jedzenie</em> moglibyśmy oczekiwać, że nasza metoda domyślnie nie będzie “jeść” żadnych obiektów, robiąc wyjątek wyłącznie dla <em>jedzenia</em>.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb416-1" aria-hidden="true" tabindex="-1"></a>zjedz.default <span class="ot">&lt;-</span> <span class="cf">function</span>(x,...){</span>
<span id="cb416-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb416-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warning</span>(<span class="st">&quot;Tego sie nie je!</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb416-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb416-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb416-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb416-4" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(mean)</span></code></pre></div>
<pre><code>## Warning in zjedz.default(mean): Tego sie nie je!</code></pre>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>))</span></code></pre></div>
<pre><code>## Warning in zjedz.default(c(1, 2, 3, 4)): Tego sie nie je!</code></pre>
<p>Zauważmy, że istnieje tu pewna hierarchia:</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">5</span>),<span class="dv">2</span>,<span class="dv">3</span>))</span></code></pre></div>
<pre><code>## Warning in zjedz.matrix(matrix(c(1, 2, 3, 4, 4, 5), 2, 3)): Przeciez to macierz! Tego sie nie je!</code></pre>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(szarlotka)</span></code></pre></div>
<pre><code>## Mniam mniam</code></pre>
<p>Funkcja generyczna wywołuje metodę dla pseudoklasy <em>default</em> wtedy, gdy dla danej klasy indywidualnie nie ma zdefiniowanej metody. W pierwszej kolejności szuka metody dedykowanej dla danej klasy, dlatego dla obiektów klas <em>jedzenie</em> i <em>matrix</em> zostały wywołane odpowiednio <em>zjedz.jedzenie</em> i <em>zjedz.matrix</em>, a nie <em>zjedz.default</em>.</p>
</div>
</div>
<div id="dziedziczenie" class="section level3 hasAnchor" number="12.2.3">
<h3><span class="header-section-number">12.2.3</span> Dziedziczenie<a href="programowanie-obiektowe-w-r-klasy-s3.html#dziedziczenie" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O <em>dziedziczeniu</em> mówimy, gdy jedna z klas przejmuje (<em>dziedziczy</em>) właściwości i cechy innej. W S3 dziedziczenie wprowadza się w zaskakująco oczywisty i prosty sposób.</p>
<p>Każdemu obiektowi można przypisać więcej niż jedną klasę, przypisując <em>class(obiekt)</em> nie jedną nazwę klasy, lecz ich wektor, np. dla utworzonego wcześniej obiektu <em>szarlotka</em>:</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(szarlotka) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ciasto&quot;</span>, <span class="st">&quot;slodkosci&quot;</span>, <span class="st">&quot;jedzenie&quot;</span>)</span>
<span id="cb424-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb424-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(szarlotka)</span></code></pre></div>
<pre><code>## [1] &quot;ciasto&quot;    &quot;slodkosci&quot; &quot;jedzenie&quot;</code></pre>
<p>Kolejność klas w wektorze nie jest przypadkowa: zaczynamy od klasy “najmłodszej” (i najważniejszej, najbardziej specyficznej), a kończymy na “najstarszej” (najogólniejszej). Kolejność ta jest również obowiązująca przy dopasowywaniu metod przez funkcję generyczną: funkcja generyczna najpierw szuka metody dla pierwszej z klas w wektorze, następnie dla drugiej itd. Jeśli nie uda jej się znaleźć metody dla żadnej z klas, wywołuje metodę dla pseudoklasy <em>default</em>.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb426-1" aria-hidden="true" tabindex="-1"></a>zjedz.ciasto <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb426-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb426-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Mniam mniam, pyszne ciacho!</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb426-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb426-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb426-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb426-4" aria-hidden="true" tabindex="-1"></a>zjedz.slodkosci <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb426-5"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb426-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Słodkie, dobre, mniam.. </span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb426-6"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb426-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb426-7"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb426-7" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(szarlotka)</span></code></pre></div>
<pre><code>## Mniam mniam, pyszne ciacho!</code></pre>
<p>Zgodnie z oczekiwaniami funkcja generyczna wywołała metodę dla pierwszej z klas w wektorze, czyli klasy <em>ciasto</em>, ignorując metody dla klas <em>slodkosci</em> i <em>jedzenie</em>.</p>
<p>W większości przypadków jednak wprowadzamy nowe klasy nie po to, by zastępować istniejące metody dla klas ogólniejszych, lecz po to by wprowadzić pewne rozszerzenia, np. metody czy atrybuty, które nie mają sensu dla innych obiektów z klasy - rodzica.</p>
<p>Wprowadźmy metodę <em>pokroj</em>. Dla każdego obiektu klasy <em>jedzenie</em> bedzie ona dzialac identycznie - dzielić atrybut <em>kalorie</em> przez wskazane <em>n</em> i zwracać <em>n</em> równych “porcji” :</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb428-1" aria-hidden="true" tabindex="-1"></a>pokroj<span class="ot">&lt;-</span><span class="cf">function</span>(x,...){</span>
<span id="cb428-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb428-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">UseMethod</span>(<span class="st">&quot;pokroj&quot;</span>,x)</span>
<span id="cb428-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb428-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb428-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb428-4" aria-hidden="true" tabindex="-1"></a>pokroj.jedzenie <span class="ot">&lt;-</span> <span class="cf">function</span>(x,n){</span>
<span id="cb428-5"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb428-5" aria-hidden="true" tabindex="-1"></a>  porcja<span class="ot">&lt;-</span><span class="fu">attr</span>(x, <span class="st">&quot;kalorie&quot;</span>)<span class="sc">/</span>n</span>
<span id="cb428-6"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb428-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rep</span>(porcja,n)</span>
<span id="cb428-7"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb428-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb428-8"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb428-8" aria-hidden="true" tabindex="-1"></a><span class="fu">pokroj</span>(kanapka,<span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 37.5 37.5 37.5 37.5</code></pre>
<p>Oprócz tego wprowadźmy metodę sensowną tylko dla klasy <em>ciasto</em>: <em>posyp_cukrem_pudrem</em>.</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb430-1" aria-hidden="true" tabindex="-1"></a>posyp_cukrem_pudrem<span class="ot">&lt;-</span><span class="cf">function</span>(x,...){</span>
<span id="cb430-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb430-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">UseMethod</span>(<span class="st">&quot;posyp_cukrem_pudrem&quot;</span>,x)</span>
<span id="cb430-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb430-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb430-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb430-4" aria-hidden="true" tabindex="-1"></a>posyp_cukrem_pudrem.ciasto <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb430-5"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb430-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Syp syp syp</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb430-6"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb430-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Zauważmy, że przez wprowadzenie dodatkowych klas obiekt szarlotka nie traci funkcjonalności klasy jedzenie:</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pokroj</span>(szarlotka,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 53 53 53 53 53</code></pre>
<p>Podczas gdy równocześnie możliwym stało się zdefiniowanie dla niego indywidualnych metod:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="fu">posyp_cukrem_pudrem</span>(szarlotka)</span></code></pre></div>
<pre><code>## Syp syp syp</code></pre>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="fu">posyp_cukrem_pudrem</span>(hot_dog)</span></code></pre></div>
<pre><code>## Error in UseMethod(&quot;posyp_cukrem_pudrem&quot;, x): niestosowalna metoda dla &#39;posyp_cukrem_pudrem&#39; zastosowana do obiektu klasy &quot;jedzenie&quot;</code></pre>
<p>Dziedziczenie może być bardzo użyteczne, ale należy je stosować z ostrożnością, mając w pamięci elastyczność klas i atrybutów w S3. Bardzo łatwo stracić orientację, w szczególności wprowadzając dziedziczenie po klasach wbudowanych lub po klasach zbudowanych przez kogoś innego - wówczas ciężko nam wziąć pod uwagę wszystkie istniejące dla danych klas metody. Posługując się dziedziczeniem i klasami w sposób rozrzutny i nieprzemyślany łatwo możemy doprowadzić do chaosu.</p>
<div id="nextmethod" class="section level4 hasAnchor" number="12.2.3.1">
<h4><span class="header-section-number">12.2.3.1</span> <em>NextMethod</em><a href="programowanie-obiektowe-w-r-klasy-s3.html#nextmethod" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><em>NextMethod</em> jest używane w sytuacji, gdy wewnątrz metody klasy chcemy wywołać metodę klasy nadrzędnej (rodzica).</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb437-1" aria-hidden="true" tabindex="-1"></a>zjedz.ciasto<span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb437-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb437-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Mniam mniam, pyszne ciacho!</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb437-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb437-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">NextMethod</span>()</span>
<span id="cb437-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb437-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb437-5"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb437-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-6"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb437-6" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(szarlotka)</span></code></pre></div>
<pre><code>## Mniam mniam, pyszne ciacho!
## Słodkie, dobre, mniam..</code></pre>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb439-1" aria-hidden="true" tabindex="-1"></a>zjedz.slodkosci <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb439-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb439-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Słodkie, dobre, mniam.. </span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb439-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb439-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">NextMethod</span>()</span>
<span id="cb439-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb439-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb439-5"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb439-5" aria-hidden="true" tabindex="-1"></a><span class="fu">zjedz</span>(szarlotka)</span></code></pre></div>
<pre><code>## Mniam mniam, pyszne ciacho!
## Słodkie, dobre, mniam.. 
## Mniam mniam</code></pre>
</div>
</div>
</div>
<div id="s4" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> S4<a href="programowanie-obiektowe-w-r-klasy-s3.html#s4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>S3 jest użyteczny i do niektórych zastosowań wystarczający, ale nie posiada wielu własności znanych z systemów programowania w innych językach. Ponadto, ze względu na dużą swobodę w tworzeniu klas i metod, utrzymanie bardziej złożonych struktur i hierarchii może być uciążliwe i mało przejrzyste z użyciem S3.</p>
<p>Pierwszą alternatywą dla S3 był system <strong>S4</strong>. W S4 metody tworzone z użyciem tej samej logiki - przez funckje generyczne. W przeciwieństie do S3, system S4 wymaga zdefiniowania klasy, w szczególności jej pól (slotów) i dziedziczenia po innych klasach.</p>
<p>Klasę definiuje się z użyciem funkcji <em>setClass</em>:</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pierwszym argumentem funkcji jest nazwa klasy</span></span>
<span id="cb441-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setClass</span>(<span class="st">&quot;nazwa_klasy&quot;</span>,</span>
<span id="cb441-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">slots =</span> <span class="fu">c</span>(</span>
<span id="cb441-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tutaj definiowane są sloty i ich typ</span></span>
<span id="cb441-5"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">slot_1 =</span> <span class="st">&quot;data.frame&quot;</span>,</span>
<span id="cb441-6"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">slot_2 =</span> <span class="st">&quot;list&quot;</span></span>
<span id="cb441-7"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-7" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb441-8"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">prototype =</span> <span class="fu">c</span>(</span>
<span id="cb441-9"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tutaj definiowane są wartości domyślne (prototyp) dla slotów</span></span>
<span id="cb441-10"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">slot_1 =</span> <span class="fu">data.frame</span>(),</span>
<span id="cb441-11"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">slot_2 =</span> <span class="fu">list</span>()</span>
<span id="cb441-12"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb441-13"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb441-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Funkcja <em>setClass</em> posiada również parametr <em>contains</em>, który odpowiada za dziedziczenie po innych klasach:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb442-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setClass</span>(<span class="st">&quot;klasa_rodzic&quot;</span>, </span>
<span id="cb442-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb442-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">slots=</span><span class="fu">c</span>(</span>
<span id="cb442-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb442-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">macierz =</span> <span class="st">&quot;matrix&quot;</span></span>
<span id="cb442-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb442-4" aria-hidden="true" tabindex="-1"></a>         ))</span>
<span id="cb442-5"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb442-5" aria-hidden="true" tabindex="-1"></a><span class="fu">setClass</span>(<span class="st">&quot;klasa_dziecko&quot;</span>, <span class="at">contains=</span><span class="st">&quot;klasa_rodzic&quot;</span>)</span></code></pre></div>
<p>Funkcje generyczne z użyciem których tworzymy metody S4 są rozróżniane od funkcji generycznych systemu S3. Mechanizm tworzenia metody jest więc bardzo podobny, ale używamy do tego celu dedykowanych dla S4 funkcji.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tworzenie funkcji generycznej S4</span></span>
<span id="cb443-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb443-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setGeneric</span>(<span class="st">&quot;nazwa_metody&quot;</span>, <span class="cf">function</span>(x, ...) <span class="fu">standardGeneric</span>(<span class="st">&quot;nazwa_metody&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;nazwa_metody&quot;</code></pre>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb445-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tworzenie metody dla klasy</span></span>
<span id="cb445-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb445-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setMethod</span>(<span class="st">&quot;nazwa_metody&quot;</span>, <span class="st">&quot;nazwa_klasy&quot;</span>, <span class="cf">function</span>(x,...){</span>
<span id="cb445-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb445-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># działanie metody na obiekcie klasy </span></span>
<span id="cb445-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb445-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<div id="bonus-przykład-wykorzystania-systemu-s4" class="section level3 hasAnchor" number="12.3.1">
<h3><span class="header-section-number">12.3.1</span> Bonus: przykład wykorzystania systemu S4<a href="programowanie-obiektowe-w-r-klasy-s3.html#bonus-przykład-wykorzystania-systemu-s4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>S4, choć bardziej restrykcyjny niż S3, nadal daje dużo swobody w przypisywaniu klas, dziedziczeniu, w szczególności w manewrowaniu wbudowanymi klasami R.</p>
<p>Wykorzystaliśmy to w naszym raczkującym pakiecie <em>autoeda</em> do ominięcia problemu przypisania różnego zachowania funkcji w zależności od otrzymanego typu danych.</p>
<p>Celem było obliczenie tej samej funkcji (np. średniej) dla wszystkich kolumn danych, przy założeniu, że nasz zbiór danych jest średniej wielkości (kilkadziesiąt kolumn - zmiennych). Jeśli niemożliwe jest obliczenie funkcji dla danej kolumny (np. próbujemy obliczyć średnią z kolumny stringów), chcieliśmy uniknąć przerywania pracy funkcji i zwracać NA.</p>
<p>By osiągnąć powyższy rezultat zdecydowaliśmy się zdefiniować klasę funkcji - miar obliczanych na kolumnach jako klasę dziedziczącą po… klasie funkcji generycznych:</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setClass</span>(<span class="st">&quot;RankingMeasure&quot;</span>,</span>
<span id="cb446-2"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">slots =</span> <span class="fu">c</span>(</span>
<span id="cb446-3"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;character&quot;</span>,</span>
<span id="cb446-4"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">description =</span> <span class="st">&quot;character&quot;</span></span>
<span id="cb446-5"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-5" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb446-6"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">prototype =</span> <span class="fu">list</span>(</span>
<span id="cb446-7"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="cn">NA_character_</span>,</span>
<span id="cb446-8"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">description =</span> <span class="cn">NA_character_</span></span>
<span id="cb446-9"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb446-10"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb446-11"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-11" aria-hidden="true" tabindex="-1"></a><span class="fu">setClass</span>(<span class="st">&quot;BuiltInMeasure&quot;</span>,</span>
<span id="cb446-12"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">contains =</span> <span class="fu">c</span>(<span class="st">&quot;standardGeneric&quot;</span>, <span class="st">&quot;RankingMeasure&quot;</span>)</span>
<span id="cb446-13"><a href="programowanie-obiektowe-w-r-klasy-s3.html#cb446-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Następnie dla każdej potrzebnej nam funkcji utworzyliśmy odpowiadający jej obiekt - funkcję generyczną klasy <em>BuiltInMeasure</em> i zdefiniowaliśmy metody tej funkcji generycznej dla możliwych typów zmiennych, zwracając NA domyślnie i wynik liczbowy, gdzie to możliwe.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="podstawy-kontroli-wersji-przy-pomocy-gita.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="moduły-w-aplikacjach-shiny.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/11-OOP.rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
